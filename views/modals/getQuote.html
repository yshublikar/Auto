<div class="modal-dialog" role="document">
    <!-- <div class="modal-content"> -->
    <div class="kw-modal ">
        <button type="button" class="arcticmodal-close kw-modal-close" data-dismiss="modal"></button>
        <header class="kw-modal-header">
            <h3><%= headerName %></h3>
        </header>
        <!-- - - - - - - - - - - - - - End of Header - - - - - - - - - - - - - - - - -->
        <!-- - - - - - - - - - - - - - Content - - - - - - - - - - - - - - - - -->
        <div class="kw-modal-content">
            <div id="validationAlert">
            </div>
            <form id="modal-form">
                <ul>
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-1" class="kw-required">Name</label>
                            <input type="text" required name="name" id="leadName">
                            <input type="hidden" id="contractorId" name="contractorId" value="<%= contractorId %>">
                        </div>
                    </li>
                    <!--/ .row -->
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-2" class="kw-required">Email</label>
                            <input type="email" required name="email" id="leadEmail">
                        </div>
                    </li>
                    <!--/ .row -->
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-3">Phone</label>
                            <input type="text" name="phone" id="leadPhone">
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-3">City</label>
                            <div id="cityLead">
                                <input class="typeahead" type="text" name="city" id="leadCity" required="" style="font-size: inherit;">
                            </div>
                            <!-- <div class="typeahead__container">
                                <div class="typeahead__field">
                                    <span class="typeahead__query">
                                                <label for="text-input-3" class="kw-required">City</label>
                                                <input class="js-typeahead-city" name="city" id="leadCity" type="search" placeholder="City" autocomplete="off" style="border: 2px solid #f0f0f0; height: 40px;">
                                        </span>
                                </div>
                            </div> -->
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-3">Service</label>
                            <div id="leadCategory">
                                <input class="typeahead" type="text" name="service" id="leadService" style="font-size: inherit;">
                            </div>
                            <!-- <div class="typeahead__container">
                                <div class="typeahead__field">
                                    <span class="typeahead__query">
                                                <label for="text-input-3" class="kw-required">Service</label>
                                                <input class="js-typeahead-category" name="service" id="leadService" type="search" placeholder="Service" autocomplete="off" style="border: 2px solid #f0f0f0; height: 40px;">
                                        </span>
                                </div>
                            </div> -->
                        </div>
                    </li>
                    <li class="row">
                        <div class="col-xs-12">
                            <label for="text-input-4" class="kw-required">Your Message</label>
                            <textarea required rows="5" name="message" id="leadMessage"></textarea>
                        </div>
                    </li>
                    <!--/ .row -->
                </ul>
                <button class="kw-btn-medium kw-theme-color" type="button" onclick="submitGetQuote('modal-form')" id="submitBtn">Submit</button>
            </form>
        </div>
    </div>
    <!-- </div> -->
</div>
<script type="text/javascript">

$(document).ready(function() {
    // $(selector).inputmask("99-9999999"); //static mask
    $('#leadPhone').inputmask({
        "mask": "(999) 999-9999"
    }); //specifying options
});

var categories = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    identify: function(obj) {
        return obj.name;
    },
    prefetch: "<%= BASE_URL + 'prefetchServ' %>"
});

function categoriesWithDefaults(q, sync) {
    if (q === '') {
        sync(categories.get('Additions & Remodeling',
            'Air Conditioning',
            'Cabinets',
            'Countertops',
            'Decks',
            'Heating & Furnace Systems',
            'Lawn & Garden Care',
            'Painting',
            'Roofing',
            'Windows',
            'Appliances',
            'Appraiser',
            'Architects & Engineers',
            'Audio-Visual & Computers',
            'Awnings',
            'Brick & Stone',
            'Carpenters',
            'Carpet & Upholstery Cleaning',
            'Ceilings',
            'Central Vacuum',
            'Cleaning & Maid Services',
            'Concrete',
            'Countertops',
            'Decks',
            'Demolition Service',
            'Designers & Decorators',
            'Developer',
            'Disability Services',
            'Disaster Recovery Services',
            'Docks',
            'Doors',
            'Drywall & Plaster',
            'Electrical',
            'Excavation',
            'Fans',
            'Fences',
            'Fireplace & Wood Stoves',
            'Flooring & Carpet',
            'Foundations',
            'Fountains & Ponds',
            'Furniture Repair & Refinish',
            'Garage & Garage Doors',
            'Glass & Mirrors',
            'Gutters',
            'Handyman Services',
            'Heating & Furnace Systems',
            'Home Inspection',
            'Home Maintenance',
            'Home Security Services',
            'Hot Tubs, Spas & Saunas',
            'Insulation',
            'Landscaping',
            'Lawn & Garden Care',
            'Locksmith',
            'Metal Fabrication',
            'Mold & Asbestos Services',
            'Moving',
            'New Home Builders',
            'Organizers',
            'Outdoor Playgrounds',
            'Painting',
            'Paving',
            'Permit Services',
            'Pest Control',
            'Plumbing',
            'Powdercoating',
            'Power Washing',
            'Roofing',
            'Sandblasting Service',
            'Senior Home Care',
            'Septic Tanks & Wells',
            'Sheds & Enclosures',
            'Siding',
            'Sign Making Service',
            'Skylights',
            'Snow Removal Service',
            'Solar',
            'Stained Glass',
            'Swimming Pools',
            'Tennis or Game Court',
            'Tile',
            'Tree Service',
            'Wall Coverings',
            'Waste Material Removal',
            'Water Treatment System',
            'Waterproofing',
            'Window Coverings',
            'Windows'));
    } else {
        categories.search(q, sync);
    }
}


$('#leadCategory .typeahead').typeahead({
    minLength: 0,
    highlight: true
}, {
    name: 'category',
    display: 'name',
    source: categoriesWithDefaults
});

var cities = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    prefetch: "<%= BASE_URL + 'cities?forHomePage=true' %>",
    remote: {
        url: "<%= BASE_URL+'cities?forHomePage=true&search=' %>+%QUERY",
        wildcard: '%QUERY'
    }
});

$('#cityLead .typeahead').typeahead(null, {
    name: 'city',
    display: 'name',
    source: cities
});

$('#leadCity').keyup(function(e) {
    if ($(this).val() && $(this).val().split(', ')[1] != undefined) {
        $(this)[0].setCustomValidity('');
    } else {
        $(this)[0].setCustomValidity('Please select city.');
    }
});
</script>
